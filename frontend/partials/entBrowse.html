<div class="panel panel-default">
  <div class="panel-body" data-toggle="modal" data-target="#entModal{{entrepreneur.borrower.id}}">
    <div class="profile-wrapper">
      <img class="profile" src="{{entrepreneur.borrower.image_url}}" alt="" />
    </div>
    <h4>{{entrepreneur.borrower.name}}</h4>
    <p>
      {{entrepreneur.description | limitTo: 120}} <a data-toggle="modal">...Read More</a>
    </p>
    <div class="progress">
      <div class="progress-bar" role="progressbar" aria-valuenow="{{(entrepreneur.totalDonations / entrepreneur.amount) * 100}}" aria-valuemin="0" aria-valuemax="100" style="width: {{(entrepreneur.totalDonations / entrepreneur.amount) * 100}}%;">
      </div>
    </div>
    <h4 class="loan-goal"><b>${{entrepreneur.totalDonations}} of ${{entrepreneur.amount}} Raised</b></h4>

    <!-- Button trigger modal -->
    <!-- <button type="button" class="btn btn-primary btn-lg">
      Read More
    </button> -->
  </div>
</div>


<!-- Modal -->
<div class="modal fade" id="entModal{{entrepreneur.borrower.id}}" tabindex="-1" role="dialog" aria-labelledby="entModalLabel{{entrepreneur.borrower.id}}">
  <div class="modal-dialog ent-profile-dialog" role="document">
    <div class="modal-content ent-profile-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <!-- <h4 class="modal-title" id="entModalLabel{{entrepreneur.borrower.id}}">{{entrepreneur.borrower.name}}</h4> -->
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-4">
            <img src="{{entrepreneur.borrower.image_url}}" alt="" class="main-profile"/>
          </div>
          <div class="col-md-8">
            <h2>{{entrepreneur.borrower.name}}</h2>
            <p class="profile-bio">
              {{entrepreneur.borrower.bio}}
            </p>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <h4 style="text-align: center;">Loan Info</h4>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <div class="progress">
              <div class="progress-bar" role="progressbar" aria-valuenow="{{(entrepreneur.totalDonations / entrepreneur.amount) * 100}}" aria-valuemin="0" aria-valuemax="100" style="width: {{(entrepreneur.totalDonations / entrepreneur.amount) * 100}}%;">
              </div>
            </div>
            <h4 class="loan-goal"><b>${{entrepreneur.totalDonations}} of ${{entrepreneur.amount}} Raised</b></h4>
          </div>
          <div class="col-md-6">
            <p class="loan-details">
              {{entrepreneur.description}}
            </p>
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Back</button>
        <button type="button" class="btn btn-primary" ng-click="donate()">Fund Now</button>

        <div class="row signin-form" ng-show="signinActive">
          <div class="col-md-12">
            <h3 class="section-title">Sign in or sign up first to fund this loan.</h3>
            <div class="row">
              <div class="col-md-4 col-md-offset-4 text-left">
                <form>
                  <div class="form-group">
                    <label for="signinEmail">Email</label>
                    <input class="form-control" type="text" name="email" id="signinEmail" ng-model="email">
                  </div>
                  <div class="form-group">
                    <label for="signinPassword">Password</label>
                    <input type="password" class="form-control" name="password" id="signinPassword" ng-model="password">
                  </div>
                  <button class="btn btn-default btn-primary" type="button" name="signinBtn" ng-click="signinSubmit(email, password); email=''; password='';">Signin</button>
                  <button class="btn btn-default" type="button" name="cancelBtn" ng-click="email=''; password=''; signinActive=false;">Cancel</button>
                </form>
                <p>Not already a user? <a data-dismiss="modal" ng-click=signuproute()"> Signup</a></p>
              </div>
            </div>
          </div>
        </div>


        <div class="row donation-form" ng-show="donationActive">
          <div class="row">
            <div class="col-md-8">
              <h5 class="form-text-left">Thanks for contributing, {{donor.name}}!</h5>
            </div>
          </div>
          <div class="col-md-4 col-md-offset-4">
            <form>
              <div class="form-group">
                <label for="donationAmount">Amount</label>
                <div class="input-group">
                  <span class="input-group-addon">$</span>
                  <input id="donationAmount" name="amount" type="number" value="20" min="0" step="0.01" data-number-to-fixed="2" ng-model="donationAmount" data-number-stepfactor="100" class="form-control currency" id="c2" />
              </div>
              </div>
              <div class="form-group">
                <label for="paymentType">Payment Type</label>
                <select type="text" class="form-control" id="paymentType" ng-model="paymentType">
                  <option value="option">Credit Card</option>
                  <option value="option">Balance: $53.00</option>
                </select>
              </div>
              <button class="btn btn-default btn-primary" type="button" name="signinBtn" data-dismiss="modal" ng-click="submitPayment(donationAmount, entrepreneur.id)">Fund</button>
              <button class="btn btn-default" type="button" name="cancelBtn" data-dismiss="modal" ng-click="donationAmount=''; paymentType='';">Cancel</button>
            </form>

          </div>
        </div>

      </div>
    </div>
  </div>
</div>
